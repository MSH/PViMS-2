<div style="height: 5px;">
  <mat-progress-bar mode="indeterminate" color="primary" *ngIf="isBusy()"></mat-progress-bar>
</div>

<mat-card class="p-0">
  
  <mat-card-title class="">
      <div class="card-title-text">{{ metaPage?.pageName | translate}}</div>
  </mat-card-title>

  <div fxLayout="row wrap" fxLayoutGap="0.1%" fxLayoutAlign="start start">
    <section fxFlex="49">
      <div class="row" *ngIf="topLeft != null">
        <div *ngIf="topLeft.widgetType == 'ItemList'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ topLeft.icon }}</mat-icon> {{ topLeft.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <mat-accordion>
                <mat-expansion-panel opened="false" *ngFor="let item of topLeft.contentItems">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{ item.title }}
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  {{ item.content}}
                </mat-expansion-panel>
              </mat-accordion>          
            </mat-card-content>
          </mat-card>
        </div>
        <div *ngIf="topLeft.widgetType == 'SubItems'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ topLeft.icon }}</mat-icon> {{ topLeft.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <div class="table-container">
                <div fxLayout="row wrap" fxLayoutGap="0.1%" fxLayoutAlign="start start" *ngFor="let item of topLeft.contentItems">
                  <div fxFlex="83" class="pr-1">
                    <button mat-button color="primary" (click)="openPageViewerPopup(item.contentPage)">{{ item.title }}</button><br/>
                    <span class="mr-16"></span><small>{{ item.subTitle }}</small>
                  </div>
                  <div fxFlex="15" class="pr-1">{{ item.modified }}</div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
      <div class="row" *ngIf="middleLeft != null">
        <div *ngIf="middleLeft.widgetType == 'ItemList'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ middleLeft.icon }}</mat-icon> {{ middleLeft.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <mat-accordion>
                <mat-expansion-panel opened="false" *ngFor="let item of middleLeft.contentItems">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{ item.title }}
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  {{ item.content}}
                </mat-expansion-panel>
              </mat-accordion>          
            </mat-card-content>
          </mat-card>
        </div>
        <div *ngIf="middleLeft.widgetType == 'SubItems'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ middleLeft.icon }}</mat-icon> {{ middleLeft.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <div class="table-container">
                <div fxLayout="row wrap" fxLayoutGap="0.1%" fxLayoutAlign="start start" *ngFor="let item of middleLeft.contentItems">
                  <div fxFlex="83" class="pr-1">
                    <button mat-button color="primary" (click)="openPageViewerPopup(item.contentPage)">{{ item.title }}</button><br/>
                    <span class="mr-16"></span><small>{{ item.subTitle }}</small>
                  </div>
                  <div fxFlex="15" class="pr-1">{{ item.modified }}</div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
      <div class="row" *ngIf="bottomLeft != null"> 
        <div *ngIf="bottomLeft.widgetType == 'ItemList'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ bottomLeft.icon }}</mat-icon> {{ bottomLeft.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <mat-accordion>
                <mat-expansion-panel opened="false" *ngFor="let item of bottomLeft.contentItems">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{ item.title }}
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  {{ item.content}}
                </mat-expansion-panel>
              </mat-accordion>          
            </mat-card-content>
          </mat-card>
        </div>
        <div *ngIf="bottomLeft.widgetType == 'SubItems'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ bottomLeft.icon }}</mat-icon> {{ bottomLeft.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <div class="table-container">
                <div fxLayout="row wrap" fxLayoutGap="0.1%" fxLayoutAlign="start start" *ngFor="let item of bottomLeft.contentItems">
                  <div fxFlex="83" class="pr-1">
                    <button mat-button color="primary" (click)="openPageViewerPopup(item.contentPage)">{{ item.title }}</button><br/>
                    <span class="mr-16"></span><small>{{ item.subTitle }}</small>
                  </div>
                  <div fxFlex="15" class="pr-1">{{ item.modified }}</div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </section>
    <section fxFlex="49">
      <div class="row" *ngIf="topRight != null">
        <div *ngIf="topRight.widgetType == 'ItemList'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ topRight.icon }}</mat-icon> {{ topRight.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <mat-accordion>
                <mat-expansion-panel opened="false" *ngFor="let item of topRight.contentItems">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{ item.title }}
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  {{ item.content}}
                </mat-expansion-panel>
              </mat-accordion>          
            </mat-card-content>
          </mat-card>
        </div>
        <div *ngIf="topRight.widgetType == 'SubItems'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ topRight.icon }}</mat-icon> {{ topRight.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <div class="table-container">
                <div fxLayout="row wrap" fxLayoutGap="0.1%" fxLayoutAlign="start start" *ngFor="let item of topRight.contentItems">
                  <div fxFlex="83" class="pr-1">
                    <button mat-button color="primary" (click)="openPageViewerPopup(item.contentPage)">{{ item.title }}</button><br/>
                    <span class="mr-16"></span><small>{{ item.subTitle }}</small>
                  </div>
                  <div fxFlex="15" class="pr-1">{{ item.modified }}</div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
      <div class="row" *ngIf="middleRight != null">
        <div *ngIf="middleRight.widgetType == 'ItemList'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ middleRight.icon }}</mat-icon> {{ middleRight.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <mat-accordion>
                <mat-expansion-panel opened="false" *ngFor="let item of middleRight.contentItems">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{ item.title }}
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  {{ item.content}}
                </mat-expansion-panel>
              </mat-accordion>          
            </mat-card-content>
          </mat-card>
        </div>
        <div *ngIf="middleRight.widgetType == 'SubItems'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ middleRight.icon }}</mat-icon> {{ middleRight.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <div class="table-container">
                <div fxLayout="row wrap" fxLayoutGap="0.1%" fxLayoutAlign="start start" *ngFor="let item of middleRight.contentItems">
                  <div fxFlex="83" class="pr-1">
                    <button mat-button color="primary" (click)="openPageViewerPopup(item.contentPage)">{{ item.title }}</button><br/>
                    <span class="mr-16"></span><small>{{ item.subTitle }}</small>
                  </div>
                  <div fxFlex="15" class="pr-1">{{ item.modified }}</div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
      <div class="row" *ngIf="bottomRight != null">
        <div *ngIf="bottomRight.widgetType == 'ItemList'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ bottomRight.icon }}</mat-icon> {{ bottomRight.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <mat-accordion>
                <mat-expansion-panel opened="false" *ngFor="let item of bottomRight.contentItems">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{ item.title }}
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  {{ item.content}}
                </mat-expansion-panel>
              </mat-accordion>          
            </mat-card-content>
          </mat-card>
        </div>
        <div *ngIf="bottomRight.widgetType == 'SubItems'">
          <mat-card class="p-0">
            <mat-card-title class="">
                <div class="card-title-text"><mat-icon class="mr-24">{{ bottomRight.icon }}</mat-icon> {{ bottomRight.widgetName | translate}}</div>
            </mat-card-title>
            <mat-card-content>
              <div class="table-container">
                <div fxLayout="row wrap" fxLayoutGap="0.1%" fxLayoutAlign="start start" *ngFor="let item of bottomRight.contentItems">
                  <div fxFlex="83" class="pr-1">
                    <button mat-button color="primary" (click)="openPageViewerPopup(item.contentPage)">{{ item.title }}</button><br/>
                    <span class="mr-16"></span><small>{{ item.subTitle }}</small>
                  </div>
                  <div fxFlex="15" class="pr-1">{{ item.modified }}</div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </section>
  </div>
</mat-card>

